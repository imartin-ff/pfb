$(document).ready(function(){function t(e){return e.position()}function e(){$(".float-line").stop().animate({left:t($(".header__menu li.active")).left+"px",width:$(".header__menu li.active").width()},200)}JSON.parse(localStorage.getItem("cart"))?$(".cart .count").text(JSON.parse(localStorage.getItem("cart")).length):$(".cart .count").text(0),$(".header__menu").prepend('<span class="float-line"></span>'),$(".header__menu li").each(function(){$(this).mouseenter(function(){var e;e=$(this),$(".float-line").stop().animate({left:t(e).left+"px",width:e.width()},200)}),$(this).mouseleave(function(){e()})}),e();let a=!1;const n=document.querySelector(".ico-btn"),l=document.querySelector(".header__menu");n.addEventListener("click",function(e){a=!a,n.classList.toggle("is-active"),l.classList.toggle("open")}),$.ionTabs("#products-tab");var r=document.querySelector(".documents__slider");r&&new Swiper(r,{slidesPerView:3,spaceBetween:20,pagination:{el:".swiper-pagination",type:"bullets",clickable:!0},wrapperClass:"documents__slider-wrapper",slideClass:"documents-slide",breakpoints:{0:{slidesPerView:1},480:{slidesPerView:2},768:{slidesPerView:3}}});const c=0<$(".cart-page").length;r=()=>{$(".counter").each(function(){let e=$(this).children(".plus"),t=$(this).children(".minus"),a=$(this).children(".counter-field");e.on("click",function(){a.val(parseInt(a.val())+1)}),t.on("click",function(){if(1<=a.val())a.val(parseInt(a.val())-1);else if(c){a.closest(".counter-wrapper").remove();let e=JSON.parse(localStorage.getItem("cart"));var t=e.findIndex(e=>e.id===parseInt(a.closest(".counter-wrapper").data("id")));e[t].types[a.closest(".counter-wrapper").data("type")]=0,localStorage.setItem("cart",JSON.stringify(e)),0==$(".cart-items").children().length&&localStorage.removeItem("cart")}})})};r();const s=$("#cart-btn");0<s.length&&s.on("click",function(e){e.preventDefault();let t={id:$(".product-card").data("id"),name:$(".product-name").text(),types:{bottle:$("#bottle").val(),box:$("#box").val(),kega:$("#kega").val()}},a=JSON.parse(localStorage.getItem("cart"));null!=a?(e=a.findIndex(e=>e.id===t.id),a[e]?a[e]=t:a.push(t)):(a=[],a.push(t)),localStorage.setItem("cart",JSON.stringify(a)),$(".cart .count").text(JSON.parse(localStorage.getItem("cart")).length)});if(0<$(".cart-items").length){let e=JSON.parse(localStorage.getItem("cart"));e.forEach(e=>{for(key in console.log(e.types),e.types)0<e.types[key]&&$(".cart-items").append((t=e.id,a=e.name,n=key,l=e.types[key],r=void 0,correctType="bottle"==(r=n)?"Бутылка 0,5":"box"==r?"Ящик (20 бутылок)":"kega"==r?"Кега 5л":void 0,`
            <div class="counter-wrapper" data-id="${t}" data-type=${n}>
                <div class="counter-name"><span class="cart__product-name">${a} </span><span class="cart__product-type">${correctType}</span></div>

                <div class="counter">
                    <button class="minus" aria-label="Отнять">
                    -
                    </button>
                    <input type="number" name="bottle" id="bottle" class="counter-field" value="${l}">
                    <button class="plus" aria-label="Добавить">
                    +
                    </button>
                </div>
            </div>
        `));var t,a,n,l,r}),r()}});